<div class="job-header-wrapper">
  <%= link_to dashboard_path, class: "fiche_enregistrement-link1" do %>
    <%= image_tag "fich_enregistrementviolet.svg", alt: "sauvegarder la fiche1" %>
    <span>Sauvegarder</span>
  <% end %>
  <div class="job-alignment-wrapper">
    <div class="job-description">
      <div class="job-title">
        <span class="deviens">Deviens</span> <span class="stress">Cuisinier</span>
      </div>
      <div class="job-image-container">
        <%= image_tag "cuisinier.jpg", alt: "cuisinier", class: "image_ebeniste" %>
      </div>
    </div>
  </div>
</div>

<div class="description">
  <h2>Description du métier</h2>
  <p>
    Le cuisinier est un professionnel des métiers de bouche, chargé de la préparation des plats en respectant les règles d’hygiène et les recettes établies. Il peut travailler dans des restaurants traditionnels, gastronomiques, collectifs ou dans des établissements étoilés.
  </p>
  <p>
    Son quotidien est rythmé par la sélection des ingrédients, la préparation, la cuisson, le dressage des assiettes et la gestion du temps de service. Il peut également participer à l’élaboration de la carte et à la création de nouveaux plats selon les saisons.
  </p>
</div>

<div class="compet">
  <h2>Compétences clés</h2>
  <p>
  <ul>
    <li><strong>Maîtrise des techniques culinaires</strong> : cuisson, découpe, assaisonnement, dressage</li>
    <li><strong>Organisation</strong> : savoir gérer son temps, son poste et anticiper les commandes</li>
    <li><strong>Connaissance des produits</strong> : maîtriser les ingrédients, les saisons, les cuissons</li>
    <li><strong>Créativité</strong> : proposer des plats originaux, équilibrés et esthétiques</li>
    <li><strong>Hygiène et sécurité</strong> : respecter strictement les normes sanitaires en cuisine</li>
    <li><strong>Résistance au stress</strong> : garder le rythme et la concentration en période de rush</li>
  </ul>
  </p>
</div>

<div class="format">
  <h2>Formation & Accès au métier</h2>
  <p>
    Formations disponibles :<br>
    <ul>
      <li><strong>CAP Cuisine</strong> : la base incontournable pour entrer dans le métier avec des compétences solides en cuisine professionnelle.</li>
      <li><strong>Bac pro Cuisine ou Commercialisation et services en restauration</strong> : une formation complète axée sur la technique et le service client.</li>
      <li><strong>BTS Management en hôtellerie-restauration</strong> : un cursus pour évoluer vers des fonctions de chef ou de gestionnaire d’établissement.</li>
      <li>De nombreux cuisiniers se forment également <strong>sur le terrain</strong>, en <strong>apprentissage</strong> dans des restaurants ou auprès de chefs expérimentés.</li>
    </ul>
  </p>
</div>

<div class="amour">
  <h2>Ce métier conviendra aux personnes qui aiment :</h2>
  <p>
  <ul>
    <li><strong>Travailler en équipe</strong> dans une ambiance dynamique et souvent intense</li>
    <li><strong>Créer des plats</strong> et faire plaisir aux clients à travers leur cuisine</li>
    <li><strong>Expérimenter et innover</strong> en testant de nouvelles recettes ou associations de saveurs</li>
    <li>Être <strong>rigoureux et rapide</strong> pour assurer la qualité et le service dans les temps</li>
  </ul>
  </p>
</div>

<!-- Carte -->
<div class="map-container">
  <div id="map"></div>
</div>

<script>
  function initMap() {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(function(position) {
        const userLat = position.coords.latitude;
        const userLng = position.coords.longitude;
        const userLocation = new google.maps.LatLng(userLat, userLng);

        const map = new google.maps.Map(document.getElementById("map"), {
          center: userLocation,
          zoom: 11
        });

        new google.maps.Marker({
          position: userLocation,
          map: map,
          title: "Vous êtes ici"
        });

        const service = new google.maps.places.PlacesService(map);
        const infoWindow = new google.maps.InfoWindow();

        service.nearbySearch({
          location: userLocation,
          radius: 50000,
          keyword: 'restaurant'
        }, function(results, status) {
          if (status === google.maps.places.PlacesServiceStatus.OK) {
            for (let i = 0; i < results.length; i++) {
              const place = results[i];
              const marker = new google.maps.Marker({
                map: map,
                position: place.geometry.location,
                title: place.name,
                icon: "https://maps.google.com/mapfiles/ms/icons/green-dot.png"
              });

              google.maps.event.addListener(marker, 'click', function() {
                const content = `
                  <strong>${place.name}</strong><br>
                  ${place.vicinity || "Adresse non disponible"}
                `;
                infoWindow.setContent(content);
                infoWindow.open(map, marker);
              });
            }
          } else {
            console.warn("Erreur Places API :", status);
          }
        });

      }, function() {
        alert("Active la géolocalisation pour voir la carte.");
      });
    } else {
      alert("Ton navigateur ne supporte pas la géolocalisation.");
    }
  }
</script>

<script async defer
  src="https://maps.googleapis.com/maps/api/js?key=YOUR_KEY_HERE&libraries=places&callback=initMap">
</script>

<div class="btn-links-wrapper">
  <%= link_to psy_profile_path(current_user.psy_profile.id), class: "voir-metiers-link" do %>
    <%= image_tag "arrow-rightviolet.svg", alt: "flèche vers la droite" %>
    <span>voir les métiers</span>
  <% end %>

  <%= link_to "Commencer une carrière", careers_path, data: { turbo_method: :post }, class: "btn-primary logo-link" %>

  <%= link_to dashboard_path, class: "fiche_enregistrement-link" do %>
    <%= image_tag "fich_enregistrementviolet.svg", alt: "sauvegarder la fiche" %>
    <span>Sauvegarder</span>
  <% end %>
</div>
