

<div class="dashboard-container">
  <!-- üîπ En-t√™te -->
  <h1 class="dashboard-title">Tableau de bord</h1>

  <div class="dashboard-main" data-controller="job" >
    <!-- üîπ Bloc GAUCHE -->
    <div class="dashboard-left">
      <!-- üîπ Ma carri√®re -->
      <div class="dashboard-career">
        <div  >
          <div class="dashboard-career-header">
            <h2 data-job-target="careerTitle" class="dashboard-section-title">Ma carri√®re</h2>
           </div>
        </div>
        <div>
          <% if @career %>
            <%= link_to "J‚Äôacc√®de √† ma carri√®re", career_path(@career), class: "dashboard-btn dashboard-btn-secondary" %>
          <% else %>
            <%= link_to "Commencer une carri√®re", careers_path, data: { turbo_method: :post }, class: "dashboard-quiz-btn" %>
          <% end %>
        </div>
      </div>

      <!-- üîπ Mon profil de reconversion -->
      <div class="dashboard-profile">
        <h2 class="dashboard-section-title">Mon profil de reconversion</h2>

        <% if @psy_profile %>
          <% logo_path = case @psy_profile.name
            when "Organis√©(e)" then asset_path("profile_logo/organisateur.png")
            when "Pragmatique" then asset_path("profile_logo/pragmatique.png")
            when "Social(e)" then asset_path("profile_logo/social.png")
            when "Cr√©atif(ve)" then asset_path("profile_logo/creatif.png")
            else asset_path("profile_logo/entreprenant.png")
          end %>

          <div class="dashboard-profile-info">
            <img src="<%= logo_path %>" alt="<%= @psy_profile.name %>" class="dashboard-profile-logo">
            <span class="dashboard-profile-highlight"><%= @psy_profile.name %></span>
          </div>
        <% end %>

        <%= link_to "Je recommence le quizz", psy_profile_path(@psy_profile), class: "dashboard-quiz-btn" %>
      </div>

      <!-- üîπ Mon Profil -->
      <div class="dashboard-user">
        <h2 class="dashboard-section-title">Mon Profil</h2>
        <% if current_user %>
          <p><strong>Nom :</strong> <%= current_user.first_name %> <%= current_user.last_name %></p>
          <p><strong>Email :</strong> <%= current_user.email %></p>
          <p><strong>Mot de passe :</strong> *******</p>
          <%= link_to "D√©connexion", destroy_user_session_path, method: :delete, class: "dashboard-logout-btn", data: { turbo_method: :delete } %>
        <% else %>
          <p>Vous n'√™tes pas connect√©.</p>
          <%= link_to "Se connecter", new_user_session_path, class: "dashboard-login-btn" %>
        <% end %>
      </div>
    </div>

    <!-- üîπ Bloc DROIT -->
    <div class="dashboard-right">
      <div class="dashboard-right-in">
      <!-- Bloc principal sur 3 colonnes et 3 lignes -->
          <div>
            <h2 class="dashboard-right-section-title">Mes m√©tiers enregistr√©s</h2>
          </div>
          <div class="dashboard-job-featured">
            <div id="job-featured"  data-action= "click->job#selectJob" >
                <img src="<%= asset_path('ebeniste.png') %>" alt="√âb√©niste" class="dashboard-job-featured-image">
                <p class="dashboard-job-title">√âb√©niste</p>
            </div>
          </div>
          <!-- 3 blocs verticaux √† droite -->
          <div class="dashboard-sidebar-1"><img src="<%= asset_path('cuisinier.png') %>" alt="Cuisinier" class="dashboard-job-featured-image"></div>
          <div class="dashboard-sidebar-2">
            <p style="color: black;">Ajoute un nouveau m√©tier</p>
            <button class="dashboard-sidebar-btn"> + </button>
          </div>
          <div class="dashboard-sidebar-3">
            <p style="color: black;">Ajoute un nouveau m√©tier</p>
            <button class="dashboard-sidebar-btn"> + </button>
          </div>
    </div>
  </div>
</div>


<%# <script>
document.addEventListener("DOMContentLoaded", function() {
  const jobFeatured = document.getElementById("job-featured");
  const careerTitle = document.getElementById("career-title");

  if (jobFeatured && careerTitle) {
    jobFeatured.addEventListener("click", function() {
      // V√©rifie si le texte existe d√©j√† pour √©viter les doublons
      let existingJobText = document.getElementById("selected-job");

      if (!existingJobText) {
        let newText = document.createElement("p");
        newText.id = "selected-job"; // Ajoute un ID pour √©viter les doublons
        newText.textContent = "√âb√©niste";
        newText.style.fontWeight = "bold";
        newText.style.marginTop = "10px";

        // Ins√®re le texte apr√®s le titre "Ma carri√®re"
        careerTitle.insertAdjacentElement("afterend", newText);
      }
    });
  }
});
</script> %>
